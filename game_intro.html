<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>SECURICORP // NVR VIEWER v5.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;600&family=Noto+Sans+SC:wght@400;500;600&family=Noto+Serif+SC:wght@400;500;700&family=ZCOOL+XiaoWei&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0&display=swap" rel="stylesheet">

    <!-- Tone.jsï¼ˆç›®å‰å¯é€‰ï¼Œç”¨æ¥ä»¥ååšéŸ³æ•ˆï¼‰ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js"></script>

    <style>
        body {
            background-color: #0a0b10;
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
        }

        .osd-font { font-family: 'Share Tech Mono', monospace; }

        /* æ•…äº‹æ­£æ–‡å­—ä½“ï¼šåå°è¯´æ„Ÿçš„ä¸­æ–‡è¡¬çº¿å­—ä½“ */
        .story-font {
            font-family: 'ZCOOL XiaoWei', 'Noto Serif SC', 'Noto Sans SC', 'Microsoft YaHei', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .monitor-glass {
            position: relative;
            overflow: hidden;
            background: #000;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        .scanlines {
            background: linear-gradient(to bottom,
                rgba(255,255,255,0),
                rgba(255,255,255,0) 50%,
                rgba(0,0,0,0.2) 50%,
                rgba(0,0,0,0.2)
            );
            background-size: 100% 4px;
            position: absolute;
            inset: 0;
            pointer-events: none;
            z-index: 20;
            opacity: 0.6;
        }

        .grain {
            position: absolute;
            top: -100%; left: -100%; width: 300%; height: 300%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1'/%3E%3C/svg%3E");
            opacity: 0.15;
            animation: grainShift 0.2s steps(4) infinite;
            pointer-events: none;
            z-index: 15;
            mix-blend-mode: overlay;
        }
        @keyframes grainShift {
            0% { transform: translate(0,0); }
            100% { transform: translate(-10%, -10%); }
        }

        .mode-day {
            filter: contrast(1.1) brightness(0.9) sepia(0.2) saturate(0.7);
        }
        .mode-night {
            filter: grayscale(100%) sepia(100%) hue-rotate(90deg) saturate(300%) brightness(0.85) contrast(1.3);
        }
        .mode-ir {
            filter: grayscale(100%) contrast(1.5) brightness(1.1);
        }

        #feed-image {
            transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            will-change: transform;
        }

        .ptz-btn {
            background: #1e293b;
            border: 1px solid #334155;
            color: #94a3b8;
            transition: all 0.1s;
        }
        .ptz-btn:active {
            background: #3b82f6;
            color: white;
            border-color: #60a5fa;
            transform: scale(0.95);
        }

        .rec-dot {
            animation: blink 1s steps(2, start) infinite;
        }
        @keyframes blink { to { visibility: hidden; } }

        ::-webkit-scrollbar { width: 8px; background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }

        /* --- STORY OVERLAY --- */
        .typing-overlay {
            position: absolute;
            inset: 0;
            z-index: 60;
            pointer-events: none;
        }

        .typing-panel {
            width: 100%;
            height: 100%;
            padding: 1.5rem;
            padding-top: 2rem;
            padding-bottom: 2rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            font-size: 13px;
            line-height: 1.9;
            color: #e5e7eb;
            background: transparent;
            text-shadow: 0 0 6px rgba(0,0,0,0.9);
            overflow-y: auto;
            pointer-events: auto; /* å…è®¸åœ¨æ–‡å­—åŒºåŸŸæ»šåŠ¨ */
        }

        @media (min-width: 768px) {
            .typing-panel {
                font-size: 15px;
                padding: 2.5rem;
            }
        }

        .typing-title {
            font-size: 11px;
            letter-spacing: 0.35em;
            text-transform: uppercase;
            color: #9ca3af;
            margin-bottom: 0.9rem;
        }

        .typing-paragraph + .typing-paragraph {
            margin-top: 0.45rem;
        }

        .typing-meta {
            margin-top: 1.8rem;
            font-size: 11px;
            color: #9ca3af;
        }

        .typing-meta p + p {
            margin-top: 0.35rem;
        }

        .hl {
            color: #facc15;
            text-shadow: 0 0 8px rgba(250, 204, 21, 0.6);
            font-weight: 600;
        }

        .blood {
            color: #f87171;
            text-shadow: 0 0 8px rgba(248, 113, 113, 0.8);
            font-weight: 600;
        }

        code {
            font-family: 'Share Tech Mono', monospace;
            font-size: 0.85em;
            background: rgba(15, 23, 42, 0.7);
            padding: 0 0.25rem;
            border-radius: 3px;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        em {
            font-style: normal;
            text-decoration: underline;
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col">
    <script type="module" src="/game_intro.tsx"></script>

<!-- èƒŒæ™¯éŸ³ä¹ï¼ˆæ³¨æ„ï¼šæ–‡ä»¶æ”¾åœ¨ audio/typewriter_soft.mp3ï¼‰ -->
<audio id="bgm-audio" src="audio/typewriter_soft.mp3" preload="auto" loop></audio>

<header class="h-14 bg-[#0f172a] border-b border-[#1e293b]ä¸–ç•Œ flex items-center justify-between px-4 shrink-0 z-50">
    <div class="flex items-center gap-3">
        <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center shadow-[0_0_10px_rgba(37,99,235,0.5)]">
            <span class="material-symbols-outlined text-white">security</span>
        </div>
        <div>
            <h1 class="font-bold text-gray-100 tracking-wider text-sm">
                æ¸…æ²³å¤§å­¦ SECURICORP <span class="text-blue-500">NVR</span>
            </h1>
            <div class="text-[10px] text-gray-500 flex gap-2">
                <span>UNIT: NVR-8804</span>
                <span class="text-green-500 font-bold">â— ONLINE</span>
            </div>
        </div>
    </div>

    <div class="flex items-center gap-2">
        <button onclick="downloadApp && downloadApp()" class="bg-[#1e293b] hover:bg-[#334155] text-gray-200 text-xs px-3 py-1.5 rounded border border-[#334155] flex items-center gap-2 transition-colors group">
            <span class="material-symbols-outlined text-[16px] group-hover:text-blue-400">download</span>
            Download App
        </button>
        <div class="h-6 w-px bg-[#334155] mx-1"></div>
        <div class="text-right">
            <div id="sys-time" class="text-xl font-bold text-gray-200 osd-font leading-none">17:01:07</div>
            <div id="sys-date" class="text-[10px] text-gray-500 font-mono">2025-11-22</div>
        </div>
    </div>
</header>

<div class="flex-1 flex overflow-hidden">

    <!-- LEFT SIDEBAR -->
    <aside class="w-64 bg-[#0b0f19] border-r border-[#1e293b] flex flex-col shrink-0 z-40 hidden md:flex">
        <div class="p-3 bg-[#131b2e] border-b border-[#1e293b]">
            <h2 class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Active Feeds</h2>
        </div>
        <div class="flex-1 overflow-y-auto">
            <div class="p-3 border-b border-[#1e293b] opacity-50 cursor-not-allowed">
                <div class="flex justify-between mb-1">
                    <span class="text-xs font-bold text-red-400">CAM 01 (Ext)</span>
                    <span class="text-[9px] bg-red-900/40 text-red-500 px-1 rounded">OFFLINE</span>
                </div>
                <div class="h-16 bg-black relative overflow-hidden rounded border border-[#334155]">
                    <div class="absolute inset-0 flex items-center justify-center text-[10px] text-gray-600">NO SIGNAL</div>
                </div>
            </div>

            <div class="p-3 border-b border-[#1e293b] opacity-50 cursor-not-allowed">
                <div class="flex justify-between mb-1">
                    <span class="text-xs font-bold text-gray-400">CAM 02 (Lobby)</span>
                    <span class="text-[9px] bg-gray-800 text-gray-500 px-1 rounded">MAINTENANCE</span>
                </div>
                <div class="h-16 bg-black relative overflow-hidden rounded border border-[#334155]">
                    <div class="absolute inset-0 flex items-center justify-center text-[10px] text-gray-600">DISABLED</div>
                </div>
            </div>

            <div class="p-3 border-b border-[#1e293b] bg-[#1e293b]/30 border-l-2 border-l-blue-500">
                <div class="flex justify-between mb-1">
                    <span class="text-xs font-bold text-blue-400">CAM 04 (B-4 Corridor)</span>
                    <span class="text-[9px] bg-green-900/40 text-green-400 px-1 rounded rec-dot">REC</span>
                </div>
                <div class="text-[10px] text-gray-500 mb-1">Motion Detected: 02:43:12</div>
            </div>
        </div>

        <div class="p-4 border-t border-[#1e293b] bg-[#0f172a]">
            <div class="grid grid-cols-2 gap-2 text-[10px] text-gray-400 font-mono">
                <div>TEMP: <span class="text-gray-200">18Â°C</span></div>
                <div>HUM: <span class="text-gray-200">45%</span></div>
                <div>LUX: <span class="text-gray-200">0.2</span></div>
                <div>IR: <span class="text-green-400">AUTO</span></div>
            </div>
        </div>
    </aside>

    <!-- CENTER VIEWPORT -->
    <main class="flex-1 bg-[#050505] flex flex-col relative p-2 md:p-6 items-center justify-center">
        <!-- ç›‘æ§å®¹å™¨é«˜åº¦è‡ªé€‚åº”è§†å£ -->
        <div class="relative w-full max-w-5xl h=[55vh] md:h-[62vh] bg-black shadow-[0_0_40px_rgba(0,0,0,0.8)] border border-[#333] rounded-sm monitor-glass group">

            <div class="w-full h-full overflow-hidden relative">
                <img
                    id="feed-image"
                    src="images/jk.png"
                    class="w-full h-full object-cover origin-center mode-day"
                    alt="Surveillance Feed"
                >
            </div>

            <div class="grain"></div>
            <div class="scanlines"></div>

            <!-- OSD -->
            <div class="absolute inset-0 p-4 md:p-8 pointer-events-none flex flex-col justify-between z-30">
                <div class="flex justify-between items-start">
                    <div class="bg-black/40 backdrop-blur-[1px] px-2 py-1 rounded text-shadow">
                        <div class="text-lg md:text-2xl font-bold text-white osd-font tracking-widest">CAM 04</div>
                        <div class="text-[10px] md:text-xs text-gray-300 osd-font">SEC_SCI_B4_NORTH</div>
                    </div>
                    <div class="bg-black/40 backdrop-blur-[1px] px-2 py-1 rounded text-right">
                        <div class="text-lg md:text-2xl font-bold text-white osd-font tracking-widest osd-timer">17:01:07</div>
                    </div>
                </div>

                <div class="absolute top-1/2 left-1/2 w-8 h-8 border border-white/20 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center opacity-30">
                    <div class="w-1 h-1 bg-white/50"></div>
                </div>

                <div class="flex justify-between items-end">
                    <div class="flex items-center gap-2">
                        <div class="w-3 h-3 rounded-full bg-red-600 rec-dot shadow-[0_0_5px_red]"></div>
                        <span class="text-xs font-bold text-red-500 tracking-wider">REC</span>
                    </div>
                    <div class="text-right text-[10px] text-gray-400 osd-font">
                        <p>PTZ: DIGITAL</p>
                        <p>ZOOM: <span id="zoom-level">1.0</span>x</p>
                    </div>
                </div>
            </div>

            <!-- PTZ hover arrows -->
            <div class="absolute inset-0 z-40 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-between p-2">
                <div class="flex justify-center">
                    <span class="material-symbols-outlined text-white/30 text-4xl">keyboard_arrow_up</span>
                </div>
                <div class="flex justify-between px-2">
                    <span class="material-symbols-outlined text-white/30 text-4xl">keyboard_arrow_left</span>
                    <span class="material-symbols-outlined text-white/30 text-4xl">keyboard_arrow_right</span>
                </div>
                <div class="flex justify-center">
                    <span class="material-symbols-outlined text-white/30 text-4xl">keyboard_arrow_down</span>
                </div>
            </div>

            <!-- æ–‡å­—æ‰“å­—å±‚ -->
            <div class="typing-overlay">
                <div id="story-typing" class="typing-panel story-font"></div>
            </div>

        </div>

        <!-- æ§åˆ¶æ  -->
        <div class="mt-4 w-full max-w-5xl bg-[#0f172a] border border-[#1e293b] rounded p-3 flex flex-col md:flex-row gap-4 items-center justify-between z-50">

            <div class="flex gap-1 bg-[#0b0f19] p-1 rounded border border-[#1e293b]">
                <button onclick="setMode('day')" class="px-3 py-1.5 rounded text-xs text-gray-300 hover:bg-[#1e293b] hover:text-white transition-colors flex items-center gap-1">
                    <span class="material-symbols-outlined text-[14px]">wb_sunny</span> Day
                </button>
                <button onclick="setMode('night')" class="px-3 py-1.5 rounded text-xs text-gray-300 hover:bg-[#1e293b] hover:text-green-400 transition-colors flex items-center gap-1">
                    <span class="material-symbols-outlined text-[14px]">night_sight_auto</span> Night
                </button>
                <button onclick="setMode('ir')" class="px-3 py-1.5 rounded text-xs text-gray-300 hover:bg-[#1e293b] hover:text-white transition-colors flex items-center gap-1">
                    <span class="material-symbols-outlined text-[14px]">infrared</span> IR
                </button>
            </div>

            <div class="flex items-center gap-4">
                <div class="text-[10px] text-gray-500 font-bold rotate-[-90deg]">PTZ</div>
                <div class="grid grid-cols-3 gap-1">
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(-1, -1)">â†–</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(0, -1)">â†‘</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(1, -1)">â†—</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(-1, 0)">â†</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center text-white font-bold" onclick="resetPTZ()">â—</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(1, 0)">â†’</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(-1, 1)">â†™</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(0, 1)">â†“</button>
                    <button class="ptz-btn w-8 h-8 rounded flex items-center justify-center" onclick="movePTZ(1, 1)">â†˜</button>
                </div>
            </div>

            <div class="flex items-center gap-2 w-48">
                <span class="material-symbols-outlined text-gray-500 text-xs">zoom_in</span>
                <input id="zoom-slider" type="range" min="1" max="3" step="0.1" value="2"
                       class="w-full h-1 bg-[#334155] rounded-lg appearance-none cursor-pointer"
                       oninput="updateZoom(this.value)">
            </div>
<!-- è¿›å…¥å®˜ç½‘æŒ‰é’® -->
<a href="index.html"
   class="fixed bottom-4 right-4 z-40 px-4 py-2 rounded bg-blue-600 text-white text-xs md:text-sm flex items-center gap-2 shadow-[0_0_10px_rgba(37,99,235,0.5)] hover:bg-[#1e293b] border border-[#334155]">
    <span class="material-symbols-outlined text-[16px]">login</span>
    è¿›å…¥å­¦æ ¡å®˜ç½‘
</a>
<!-- å·¦ä¸‹è§’å¼€å¯å£°éŸ³æŒ‰é’® -->
<button id="audio-toggle"
        class="fixed bottom-4 left-4 z-50 px-3 py-1.5 rounded-full bg-black/70 border border-[#4b5563] text-[11px] text-gray-200 flex items-center gap-1 backdrop-blur hover:bg-black/80 transition-opacity opacity-70">
    ğŸ”ˆ ç‚¹å‡»å¼€å¯å£°éŸ³
</button>
        </div>

    </main>
</div>





<canvas id="dl-canvas" class="hidden"></canvas>

<script>
    // --- ç³»ç»Ÿæ—¶é—´ ---
    function updateTime() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-GB', { hour12: false });
        const dateParts = now.toLocaleDateString('en-GB').split('/');
        const dateStr = dateParts.reverse().join('-');

        document.getElementById('sys-time').innerText = timeStr;
        document.getElementById('sys-date').innerText = dateStr;
        document.querySelectorAll('.osd-timer').forEach(el => el.innerText = timeStr);
    }
    setInterval(updateTime, 1000);
    updateTime();

    // --- PTZ å˜æ¢ ---
    let panX = 0;
    let panY = 0;
    let scale = 1;

    function updateTransform() {
        const img = document.getElementById('feed-image');
        img.style.transform = `scale(${scale}) translate(${panX}%, ${panY}%)`;
        document.getElementById('zoom-level').innerText = parseFloat(scale).toFixed(1);
    }

    function movePTZ(dx, dy) {
        const step = 5;
        panX -= (dx * step);
        panY -= (dy * step);

        const limit = (scale - 1) * 40;
        if (panX > limit) panX = limit;
        if (panX < -limit) panX = -limit;
        if (panY > limit) panY = limit;
        if (panY < -limit) panY = -limit;

        updateTransform();
    }

    function resetPTZ() {
        panX = 0;
        panY = 0;
        updateTransform();
    }

    function updateZoom(val) {
        scale = val;
        updateTransform();
    }

    updateTransform();

    function setMode(mode) {
        const img = document.getElementById('feed-image');
        img.classList.remove('mode-day', 'mode-night', 'mode-ir');
        img.classList.add(`mode-${mode}`);
    }

    document.addEventListener('keydown', (e) => {
        if(e.key === "ArrowUp") movePTZ(0, -1);
        if(e.key === "ArrowDown") movePTZ(0, 1);
        if(e.key === "ArrowLeft") movePTZ(-1, 0);
        if(e.key === "ArrowRight") movePTZ(1, 0);
    });

    // --- BGM é€»è¾‘ï¼šå¿…é¡»ç”±ç”¨æˆ·ç‚¹å‡»è§¦å‘ä¸€æ¬¡ ---
    let audioInitialized = false;
    let bgmPlaying = false;

    function updateAudioToggleText() {
        const btn = document.getElementById('audio-toggle');
        if (!btn) return;
        if (bgmPlaying) {
            btn.textContent = 'ğŸ”Š å£°éŸ³å·²å¼€å¯';
            btn.classList.remove('opacity-70');
        } else {
            btn.textContent = 'ğŸ”ˆ ç‚¹å‡»å¼€å¯å£°éŸ³';
            btn.classList.add('opacity-70');
        }
    }

    function startBgm() {
        const bgm = document.getElementById('bgm-audio');
        if (!bgm) return;
        bgm.volume = 0.45;
        bgm.play().then(() => {
            bgmPlaying = true;
            updateAudioToggleText();
        }).catch((err) => {
            console.log('BGM play blocked:', err);
        });
    }

    function stopBgm() {
        const bgm = document.getElementById('bgm-audio');
        if (!bgm) return;
        bgm.pause();
        bgmPlaying = false;
        updateAudioToggleText();
    }

    // å·¦ä¸‹è§’æŒ‰é’®ç‚¹å‡»ï¼šç¬¬ä¸€æ¬¡ç‚¹å‡»åˆå§‹åŒ–éŸ³é¢‘ï¼Œä»¥åç‚¹å‡»åˆ‡æ¢å¼€å…³
    const audioToggle = document.getElementById('audio-toggle');
    if (audioToggle) {
        audioToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            if (!audioInitialized) {
                audioInitialized = true;
                if (typeof Tone !== 'undefined' && Tone.start) {
                    Tone.start().catch(() => {});
                }
                startBgm();
            } else {
                if (bgmPlaying) stopBgm(); else startBgm();
            }
        });
    }

    // ä»»æ„åœ°æ–¹ç¬¬ä¸€æ¬¡ç‚¹å‡»ä¹Ÿå¯ä»¥é¡ºä¾¿å¼€å¯ï¼ˆé˜²æ­¢ä»–æ²¡çœ‹åˆ°æŒ‰é’®ï¼‰
    document.addEventListener('click', function firstClick() {
        if (!audioInitialized) {
            audioInitialized = true;
            if (typeof Tone !== 'undefined' && Tone.start) {
                Tone.start().catch(() => {});
            }
            startBgm();
        }
        document.removeEventListener('click', firstClick);
    });

    // --- æ•…äº‹å†…å®¹ + æ‰“å­— ---
    const storyHtml = `
<div class="typing-title">å†…éƒ¨æ¡£æ¡ˆèŠ‚é€‰</div>

<div class="typing-paragraph">â€œä»–ä»¬è¯´å§å§æ˜¯è‡ªæ€ï¼Œæ˜¯æ„å¤–ã€‚â€”â€”æˆ‘ä¸€ä¸ªå­—éƒ½ä¸ä¿¡ã€‚â€</div>

<div class="typing-paragraph">
  æˆ‘ä»¬æ˜¯åœ¨åŒä¸€ä¸ª<span class="hl">ç¦åˆ©é™¢</span>é•¿å¤§çš„ã€‚
</div>

<div class="typing-paragraph">
  å¥¹æ¯”æˆ‘å¤§å››å²ï¼Œä»æˆ‘æœ‰è®°å¿†å¼€å§‹ï¼Œå¥¹å°±ä¹ æƒ¯ç«™åœ¨å‰é¢ã€‚<br>
  åœ¨ç¦åˆ©é™¢é‡Œï¼Œå¥¹æ˜¯æˆ‘å”¯ä¸€ç›¸ä¾ä¸ºå‘½çš„äººã€‚
</div>

<div class="typing-paragraph">
  åæ¥ï¼Œå¥¹è€ƒä¸Šäº† <span class="hl">æ¸…æ²³å¤§å­¦</span>ã€‚
</div>

<div class="typing-paragraph">
  é‚£æ˜¯æˆ‘ç¬¬ä¸€æ¬¡è§‰å¾—ï¼Œæˆ‘ä»¬ä¹Ÿè®¸çœŸçš„èƒ½ç¦»å¼€é‚£ä¸ªå°å°çš„é™¢å­ã€‚<br>
  å¥¹åœ¨ä¿¡é‡Œè¯´ï¼šâ€œç­‰ä½ æ¥äº†ï¼Œæˆ‘ä»¬å°±åªæ˜¯æ™®é€šå¤§å­¦ç”Ÿï¼Œå¯ä»¥è¿‡æ™®é€šäººçš„ç”Ÿæ´»ã€‚â€
</div>

<div class="typing-paragraph">
  å†åæ¥ï¼Œæˆ‘æ¥åˆ°äº†ä¸€ä¸ªç”µè¯ã€‚
</div>

<div class="typing-paragraph">
  ç”µè¯é‚£å¤´æ˜¯ä¸€ä¸ªé™Œç”Ÿçš„å£°éŸ³ï¼š<br>
  â€œä½ å§å§ä» <span class="hl">B-4 æ¥¼</span> æ„å¤–å è½ã€‚<br>
  ç›®å‰åˆæ­¥è®¤å®šä¸º<span class="blood">æ„å¤–äº‹ä»¶</span>ï¼Œå…·ä½“åŸå› è¿˜åœ¨è°ƒæŸ¥ä¸­ã€‚â€
</div>

<div class="typing-paragraph">
  ä»–ä»¬è¯´ï¼Œæ˜¯å¥¹è‡ªå·±ä¸å°å¿ƒã€‚<br>
  è¯´ï¼Œå¥¹â€œè¿‘æœŸæƒ…ç»ªå¼‚å¸¸â€ï¼Œâ€œå‹åŠ›è¿‡å¤§â€ã€‚<br>
  è¯´ï¼Œå·²ç»å°½åŠ›äº†ï¼Œè®©æˆ‘â€œèŠ‚å“€ï¼Œç†æ€§çœ‹å¾…â€ã€‚
</div>

<div class="typing-paragraph">
  ä½†æˆ‘çŸ¥é“ï¼Œå¥¹æœ‰å¤šæƒ³æ´»ä¸‹å»ã€‚
</div>

<div class="typing-paragraph">
  æ‰€ä»¥é«˜è€ƒå¡«å¿—æ„¿çš„æ—¶å€™ï¼Œæˆ‘åªå†™äº†ä¸€ä¸ªå­¦æ ¡ï¼š<em>æ¸…æ²³å¤§å­¦</em>ã€‚
</div>

<div class="typing-paragraph">
  ç°åœ¨ï¼Œæˆ‘ä¹Ÿæ¥åˆ°äº†<span class="hl">æ¸…æ²³å¤§å­¦</span>ï¼Œ<br>
  æˆ‘æ¥åˆ°äº†è¿™é‡Œï¼Œ<br>
  æˆ‘è¦æ‰¾åˆ°å¥¹ç•™ä¸‹çš„æ‰€æœ‰ç—•è¿¹ï¼Œå¥¹ç•™åœ¨<span class="hl">å¿ƒç†ä¸­å¿ƒ</span>ã€<span class="hl">é‚®ç®±</span>é‡Œçš„é‚£äº›ç¢ç‰‡è®°å½•ã€‚
</div>

<div class="typing-paragraph">
  å®˜æ–¹çš„äº‹æ•…é€šæŠ¥ã€æ¨¡ç³Šçš„ç›‘æ§æ—¶é—´ã€éœ€è¦å¯†ç çš„å¤‡å¿˜å½•ã€<br>
  è¿˜æœ‰é‚£äº›åœ¨ã€Œæ ¡å›­å¢™ã€ä¸Šï¼Œå¾ˆå¿«å°±è¢«åˆ·ä¸‹å»çš„åŒ¿åè´´â€”â€”<br>
  éƒ½è—åœ¨è¿™ä¸ªçœ‹ä¸Šå»å¾ˆæ­£å¸¸çš„å­¦æ ¡å®˜ç½‘é‡Œã€‚
</div>

<div class="typing-paragraph">
  å¦‚æœä»–ä»¬ç»™ä¸å‡ºç­”æ¡ˆï¼Œé‚£å°±ç”±æˆ‘æ¥é‡å»ºé‚£å¤©æ™šä¸Šçš„æ—¶é—´çº¿ï¼š<br>
  è°å…ˆèµ°è¿›äº† B-4ï¼Œ<br>
  è°æå‰å…³äº†ç›‘æ§ï¼Œ<br>
  è°å®³æ­»äº†æˆ‘å§å§ã€‚
</div>

<div class="typing-paragraph">
  æˆ‘ä¸€å®šè¦æ‰¾åˆ°å‡¶æ‰‹ã€‚<br><br>
  æˆ‘ä¼šå¸¦ç€å‡¶æ‰‹å›ç¦åˆ©é™¢æ•‘æ´»ä½ ï¼
</div>

<div class="typing-meta">
  <p>ä½ å°†ä»¥å¦¹å¦¹æ–°ç”Ÿçš„èº«ä»½ï¼Œç™»å½•æ¸…æ²³å¤§å­¦çš„æ ¡å›­ç½‘ã€‚<br>
  å¤§éƒ¨åˆ†é¡µé¢çœ‹èµ·æ¥éƒ½å¾ˆæ­£å¸¸ï¼Œåªæœ‰åœ¨<span class="hl">ç‰¹å®šè´¦å·</span>å’Œ<span class="hl">ç‰¹å®šé¡ºåº</span>ä¸‹ï¼Œç³»ç»Ÿæ‰ä¼šéœ²å‡ºå£é£ã€‚<br>
  æŸäº›è®°å½•å·²ç»è¢«â€œå°å­˜â€ï¼Œä½†åªè¦æ–¹æ³•å¯¹äº†ï¼Œå®ƒä»¬è¿˜ä¼šè¯´è¯ã€‚</p>

  <p class="typing-paragraph">å†…éƒ¨ä½¿ç”¨ Â· ç¦æ­¢å¤–ä¼ <br>
  ä½ å¯ä»¥ä»<span class="hl">å¦¹å¦¹è´¦å·</span>å¼€å§‹ï¼Œé€æ­¥è§£é”ç›¸å…³äººå‘˜çš„è§†è§’ã€‚</p>

  <p class="typing-paragraph">
    æ¨èä½©æˆ´è€³æœºï¼Œåœ¨å®‰é™ç¯å¢ƒä¸‹æ¸¸ç©æœ¬æ•…äº‹ã€‚<br>
    æ•…äº‹æ¶‰åŠæ ¡å›­æƒåŠ›ä¸å¯¹ç­‰ã€å¿ƒç†å‹åŠ›ä¸ä¸å½“å¸ˆç”Ÿè¾¹ç•Œï¼Œå¦‚æ„Ÿåˆ°ä¸é€‚ï¼Œè¯·åŠæ—¶åœä¸‹ã€‚
  </p>

  <p class="typing-paragraph">
    é¦–æ¬¡ç™»å½•å»ºè®®ä½¿ç”¨åˆå§‹å¯†ç ï¼š<br>
    è´¦å·ï¼š<code>linjing@stu.qh.edu</code><br>
    å¯†ç ï¼š<code>qh-2025</code>
  </p>

  <p class="typing-paragraph">
    æç¤ºï¼šæœ‰äº›çº¿ç´¢åªä¼šåœ¨<span class="hl">ç¬¬äºŒæ¬¡ã€ç¬¬ä¸‰æ¬¡ç™»å½•</span>åå‡ºç°ã€‚<br>
    è¯·ä¿ç•™å­˜æ¡£ï¼Œä¸è¦æ¸…ç©ºæµè§ˆæ•°æ®ã€‚
  </p>
</div>
`;

    (function runTyping() {
        const container = document.getElementById('story-typing');
        if (!container) return;

        const full = storyHtml.trim();
        let index = 0;

        function step() {
            if (index > full.length) {
                return;
            }

            container.innerHTML = full.slice(0, index++);
            const ch = full[index - 1];

            // è‡ªåŠ¨å‘ä¸Šæ»šåŠ¨
            if (container.scrollHeight > container.clientHeight) {
                container.scrollTop = container.scrollHeight - container.clientHeight;
            }

            let delay = 80; // æ‰“å­—åŸºç¡€é€Ÿåº¦
            if ("ï¼Œã€‚ï¼ï¼Ÿï¼šï¼›â€¦".includes(ch)) {
                delay = 220;  // æ ‡ç‚¹åœé¡¿
            }

            setTimeout(step, delay);
        }

        setTimeout(step, 800);
    })();

    function downloadApp() {
        alert('è¯·å‰å¾€æŒ‡å®šæ¸ é“ä¸‹è½½å®¢æˆ·ç«¯ã€‚');
    }
</script>
</body>
</html>

